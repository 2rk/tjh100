%h1 Listing songs
%span#selection_qty= "#{@song_ids.length} of #{Selection::SELECTION_QTY}"

%br

= form_for @search do |f|
  = f.label :name_contains, "Name"
  = f.text_field :name_contains
  %br
  = f.label :artist_contains, "Artist"
  = f.text_field :artist_contains
  = f.submit "Search"

= paginate @songs
%br
= link_to 'New Song', new_song_path

%table
  %tr
    %th Name
    %th Artist
    %th Position
    %th Picks

  - @songs.each do |song|
    %tr
      %td= link_to song.name, song
      %td= song.artist
      %td.center= song.position
      %td.center= link_to song.selections.length, song_users_path(song)
      - if @song_ids.include? song.id
        %td= link_to "Remove", selection_path(song), :method => :delete
      - else
        %td= link_to_unless current_user.max_selections, "Add", song_selections_path(song), :method => :post

%br


= paginate @songs